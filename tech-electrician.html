<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Aug 28 2019 02:30:31 GMT+0000 (UTC)  -->
<html data-wf-page="5d656d797ba744ebf6205bcd" data-wf-site="5d64d56a9093d725d5c41aa5">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.6.5, mobirise.com">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <title>ข้อมูลไฟฟ้าดับ</title>
  <meta content="ข้อมูลไฟฟ้าดับ" property="og:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/rc2-8f3572.webflow.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&subset=latin">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <!-- <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script> -->
  <script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
  <link href="icons/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="icons/webclip.png" rel="apple-touch-icon">

</head>
<body class="body">
  <div class="box-form">
    <div class="head w-clearfix">
      <div class="logo1"><img src="images/rc2-logo1-01.png" srcset="images/rc2-logo1-01-p-500.png 500w, images/rc2-logo1-01-p-800.png 800w, images/rc2-logo1-01-p-1080.png 1080w, images/rc2-logo1-01-p-1600.png 1600w, images/rc2-logo1-01-p-2000.png 2000w, images/rc2-logo1-01.png 2206w" sizes="100px" alt="" class="image-3"></div>
      <div class="name">
        <h4 class="heading-2">ชื่อพนักงานแก้กระแสไฟฟ้าขัดข้อง</h4><label for="name-2" class="field-label" id="electrician" name="electrician"></label>
        <h4 class="heading-2 _2">สังกัด</h4><label for="name-2" class="field-label" id="dept"></label>
        <h4 class="heading-2" id="electrician"></h4>
        <h4 class="heading-2" id="staffname"></h4>
        <h4 class="heading-2 _2" id="staffdept"></h4>
      </div>
    </div>
    <h2 class="heading">ข้อมูลเหตุการณ์ไฟฟ้าดับ</h2>
    <div class="step1 w-form">
      <form id="form_e1" name="form_e1" data-name="Email Form"  method="post" runat="server" onsubmit="return validateForm()">
        <label for="name" class="field-label subhead">ข้อมูลทั่วไป</label>
        <hidden id="id_record" name="id_record"></hidden>
        <hidden id="page" name="page" value="e1"></hidden>
        <hidden id="staffid" name="staffid"></hidden>
        <hidden id="electrician" name="electrician"></hidden>
        <label for="node-2" class="field-label">วันที่ไฟฟ้าเริ่มดับ</label><input type="date" maxlength="256" id="datehappen" name="datehappen" class="box-fill w-input" readonly>
        <label for="node-2" class="field-label">เวลาเริ่มดับ</label><input type="time" maxlength="256" id="timehappen" name="timehappen" class="box-fill w-input" readonly>
        <h2 class="heading">ข้อมูลทั่วไปและอุปกรณ์</h2>
        <!-- <div class="column-4 w-col w-col-6"> -->
          <label for="node-4" class="field-label">อุปกรณ์ที่ทำงาน</label>
          <input type="text" class="box-fill w-input" maxlength="256" name="equipcode" data-name="Email 2" id="equipcode" readonly>
          <label for="node-3" class="field-label">การทำงาน</label>
          <input type="text" class="box-fill w-input" maxlength="256" name="fedderwork" data-name="Email 2" id="fedderwork" readonly>
          <!-- <label for="email-3" class="field-label">อุปกรณ์สิ้นสุด</label>
          <input type="text" class="box-fill w-input" maxlength="256" name="equipend" data-name="Email 2" id="equipend" readonly> -->
          <label for="email-3" class="field-label">โหลดหาย (MW)</label><input type="text" class="box-fill w-input" maxlength="256" name="load" data-name="Name 6" id="load" placeholder="0" onkeyup="return Checknumber()" readonly>
          <label for="email-3" class="field-label">กระแสลัดวงจร (A)</label><input type="text" class="box-fill w-input" maxlength="256" name="distance" data-name="Email 2" id="distance" placeholder="0" onkeyup="return Checknumber()" readonly>
        <!-- </div> -->

        <label for="name-7" class="field-label subhead">สาเหตุไฟดับ</label>
        <select name="maincause" id="maincause" class="box-fill w-input" >
          <option value="1">ทราบสาเหตุ</option>
          <option value="0">สันนิษฐาน</option>
        </select>
        <label for="email-3" class="field-label">เกิดเหตุในระบบของ:</label>
          <select name="course" id="course" required="" class="box-fill w-input" maxlength="256" name="course" data-name="Email 2">
            <option value="0">เลือกสาเหตุ</option>
            <option value="PEA">กฟภ.</option>
            <option value="EGAT">กฟผ.</option>
          </select>

          <!-- <label for="email-3" class="field-label">กฟภ.รับผิดชอบในจุดเกิดเหตุ</label> -->
            <!-- <input type="email" class="box-fill w-input" maxlength="256" name="email-2" data-name="Email 2" id="email-2" required=""> -->
            <!-- <hidden name="Br_code" id="Br_code" ></hidden>
            <select class="box-fill w-input" maxlength="256" name="happenarea" data-name="Email 2" id="happenarea" onchange="functionRelation()">
              <option value="0">กรุณาเลือก</option>

            </select>
            <select class="box-fill w-input" maxlength="256" name="subhappenarea" data-name="Email 2" id="subhappenarea" >
              <option value="0">กรุณาเลือก</option>
            </select> -->
            <label for="name-7" class="field-label">สาเหตุหลัก</label>
            <select id="causetype" name="causetype" required="" maxlength="256" class="box-fill w-input" data-name="Email 2" >
              <option value="0">เลือกสาเหตุ</option>
              <option value="TC001">ต้นไม้</option>
              <option value="TC002">อุปกรณ์</option>
              <option value="TC003">พนักงาน กฟภ.</option>
              <option value="TC004">บุคคลภายนอก</option>
              <option value="TC005">สัตว์</option>
              <option value="TC006">ยานพาหนะ</option>
              <option value="TC007">วัสดุแปลกปลอม</option>
              <option value="TC008">สภาพแวดล้อม</option>
              <option value="TC009">ภัยธรรมชาติ</option>
              <option value="TC010">สงคราม/จลาจล</option>
              <option value="TC011">จ่ายเกินพิกัด</option>
              <option value="TC012">อื่นๆ</option>
            </select>
            <label for="name-7" class="field-label">ลักษณะสาเหตุ</label>
              <select id="subcause" name="subcause" class="box-fill w-input">
                  <!-- Dependent Select option field -->
              </select>
            <!-- <label for="name-7" class="field-label subhead _2">อุปกรณ์ต้นเหตุ</label> -->
            <label for="name-7" class="field-label">รายละเอียดสาเหตุ</label>
              <input type="text" class="box-fill w-input" maxlength="100" name="detail" data-name="Name 2" id="detail">

        <label for="node" class="field-label">วันที่จ่ายไฟคืน</label><input type="date" maxlength="256" id="daterestore" name="daterestore" class="box-fill w-input">
        <label for="node-2" class="field-label">เวลาจ่ายไฟคืน</label><input type="time" maxlength="256" id="timerestore" name="timerestore" class="box-fill w-input">
        <label for="node-3" class="field-label">รูปถ่าย</label>
          <div class="w-layout-grid grid-2">

            <div class="image-upload">
              <label for="file-input1"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Image/assets/placeholder.60f9b1840c.svg" height="80px" id="image1" alt="" class="im1" ></label>
              <input type="file" maxlength="256" id="file-input1" class="box-fill w-input" name="image1" accept="image/*" onchange="loadFile1(event)" >
              <!-- capture style="display:none" -->

            </div>

            <div class="image-upload">
              <label for="file-input2"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Image/assets/placeholder.60f9b1840c.svg" height="80px" id="image2" alt="" class="im1" > </label>
              <input type="file" maxlength="256" id="file-input2" class="box-fill w-input" name="image2" accept="image/*" onchange="loadFile2(event)" >
            </div>

            <div class="image-upload">
              <label for="file-input3"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Image/assets/placeholder.60f9b1840c.svg" height="80px" alt="" class="im1" id="image3"></label>
              <input type="file" maxlength="256" id="file-input3" class="box-fill w-input" name="image3" accept="image/*" onchange="loadFile3(event)"  >
            </div>

          </div>
          <!-- style="cursor:pointer" -->
          <script>
              // console.log("1"+event.target.name);
              var loadFile1 = function(event) {
              console.log(event);
              console.log("1"+event.target.name);
              console.log(event.target.name)

                var image1 = document.getElementById('image1');
                image1.src = URL.createObjectURL(event.target.files[0]);
                var selectedFile = document.getElementById("file-input1").files;
                console.log(selectedFile);
                console.log(selectedFile[0]['name'])
                if (selectedFile.length > 0) {
    // RUN A LOOP TO CHECK EACH SELECTED FILE.
                for (var i = 0; i <= selectedFile.length - 1; i++) {

                  var fsize = selectedFile.item(i).size; // THE SIZE OF THE FILE.
                  }
                }
                if (selectedFile.length > 0) {
                // Select the very first file from list
                var fileToLoad = selectedFile[0];
                // FileReader function for read the file.
                var fileReader = new FileReader();
                var base64;
                // Onload of file read the file content
                fileReader.onload = function(fileLoadedEvent) {
                  base64 = fileLoadedEvent.target.result;
                  // console.log(base64);
                  var fields = base64.split(',');
                  base64updte = fields[1];
                  // console.log('###########base64#########');
                  // console.log(base64updte);
                };
                // Convert data to base64
                fileReader.readAsDataURL(fileToLoad);
              } else {
                alert("Please attach image.");
              }
            };
          </script>
          <script>

              var loadFile2 = function(event) {
              var image2 = document.getElementById('image2');
                  image2.src = URL.createObjectURL(event.target.files[0]);
                  console.log("2"+event.target.name);

                  image2.src = URL.createObjectURL(event.target.files[0]);
                  var selectedFile = document.getElementById("file-input2").files;
                  console.log(selectedFile);
                  console.log(selectedFile[0]['name'])
                  if (selectedFile.length > 0) {
      // RUN A LOOP TO CHECK EACH SELECTED FILE.
                  for (var i = 0; i <= selectedFile.length - 1; i++) {

                    var fsize = selectedFile.item(i).size; // THE SIZE OF THE FILE.
                    }
                  }
                  if (selectedFile.length > 0) {
                  // Select the very first file from list
                  var fileToLoad = selectedFile[0];
                  // FileReader function for read the file.
                  var fileReader = new FileReader();
                  var base64;
                  // Onload of file read the file content
                  fileReader.onload = function(fileLoadedEvent) {
                    base64 = fileLoadedEvent.target.result;
                    // console.log(base64);
                    var fields = base64.split(',');
                    base64updte2 = fields[1];
                    // console.log('###########base64#########');
                    // console.log(base64updte2);
                  };
                  // Convert data to base64
                  fileReader.readAsDataURL(fileToLoad);
                } else {
                  alert("Please attach image.");
                }

            };
          </script>
          <script>

              var loadFile3 = function(event) {
              var image3 = document.getElementById('image3');
                  image3.src = URL.createObjectURL(event.target.files[0]);
                  console.log("3"+event.target.name);

                  image3.src = URL.createObjectURL(event.target.files[0]);
                  var selectedFile = document.getElementById("file-input3").files;
                  console.log(selectedFile);
                  console.log(selectedFile[0]['name'])
                  if (selectedFile.length > 0) {
      // RUN A LOOP TO CHECK EACH SELECTED FILE.
                  for (var i = 0; i <= selectedFile.length - 1; i++) {

                    var fsize = selectedFile.item(i).size; // THE SIZE OF THE FILE.
                    }
                  }
                  if (selectedFile.length > 0) {
                  // Select the very first file from list
                  var fileToLoad = selectedFile[0];
                  // FileReader function for read the file.
                  var fileReader = new FileReader();
                  var base64;
                  // Onload of file read the file content
                  fileReader.onload = function(fileLoadedEvent) {
                    base64 = fileLoadedEvent.target.result;
                    // console.log(base64);
                    var fields = base64.split(',');
                    base64updte3 = fields[1];
                    // console.log('###########base64#########');
                    // console.log(base64updte3);
                  };
                  // Convert data to base64
                  fileReader.readAsDataURL(fileToLoad);
                } else {
                  alert("Please attach image.");
                }

            };
          </script>

        <label for="node-4" class="field-label">แผนที่</label>

        <!-- <button onclick="getLocation()" class="submit-button-2 w-button">Current Location</button> -->
        <!-- style=" overflow:visible; position: absolute;" -->
        <div id="map"  class="map" ></div>
        <script>
          // Note: This example requires that you consent to location sharing when
          // prompted by your browser. If you see the error "The Geolocation service
          // failed.", it means you probably did not give permission for the browser to
          // locate you.
          var map, infoWindow;
          function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 14.812975, lng: 100.811338},
              zoom: 10

            });
            infoWindow = new google.maps.InfoWindow;
            // Try HTML5 geolocation.
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                  lat: position.coords.latitude,
                  lng: position.coords.longitude
                };
                 var marker = new google.maps.Marker({
                     map: map,
                     anchorPoint: new google.maps.Point(0, -29)

                    });

                map.setCenter(pos);
                map.setZoom(16);
                marker.setPosition(pos);
                marker.setVisible(true);
                infoWindow.setPosition(pos);
                infoWindow.setContent('ตำแหน่งเหตุการณ์กระแสไฟฟ้าขัดข้อง');
                infoWindow.open(map,marker);
                console.log(pos.lat);
                lat=pos.lat;
                console.log(pos.lng);
                lng=pos.lng;
                }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
              });
            } else {
              // Browser doesn't support Geolocation
              handleLocationError(false, infoWindow, map.getCenter());
            }

          }

          function handleLocationError(browserHasGeolocation, infoWindow, pos) {
            infoWindow.setPosition(pos);
            infoWindow.setContent(browserHasGeolocation ?
                                  'Error: The Geolocation service failed.' :
                                  'Error: Your browser doesn\'t support geolocation.');
            infoWindow.open(map);
          }
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAiY1dOLQp4TXab5OXsxD6FogmPaNFrFJw&callback=initMap">
        </script>

        <!-- key=AIzaSyD63yeUAQ7wm8D85VU0a79odY6WEbXZMlo -->
        <!-- <input type="email" maxlength="256" id="node-4" class="box-fill w-input"> -->
            <!-- <div id="lat" type="hidden"></div>
            <div id="lon" type="hidden"></div> -->
            <!-- <div id="map" class="map">

              <script type="text/javascript">
                    const markerSource = new ol.source.Vector();
                    var markerStyle = new ol.style.Style({
                      image: new ol.style.Icon( /** @type {olx.style.IconOptions} */ ({
                        anchor: [0.5, 46],
                        anchorXUnits: 'fraction',
                        anchorYUnits: 'pixels',
                        opacity: 0.75,
                        src: 'https://openlayers.org/en/v5.3.0/examples/data/icon.png'
                      }))
                    });

                    let map = new ol.Map({
                      target: 'map',
                      layers: [
                        new ol.layer.Tile({
                          source: new ol.source.OSM(),
                        }),
                        new ol.layer.Vector({
                          source: markerSource,
                          style: markerStyle,
                        }),
                      ],
                      view: new ol.View({
                        center: ol.proj.fromLonLat([100.5577409, 13.8535583]),
                        zoom: 15,
                      })
                    });

                    function addMarker(lon, lat) {
                      console.log('lon:', lon);
                      console.log('lat:', lat);

                      // : Edit code for POST data to backend
                      document.getElementById("lat").value = lat;
                      document.getElementById('lon').value = lon;


                      var iconFeatures = [];

                      var iconFeature = new ol.Feature({
                        geometry: new ol.geom.Point(ol.proj.transform([lon, lat], 'EPSG:4326',
                          'EPSG:3857')),
                        name: 'Null Island',
                        population: 4000,
                        rainfall: 500
                      });

                      markerSource.addFeature(iconFeature);
                    }

                    map.on('singleclick', function(event) {
                      var lonLat = ol.proj.toLonLat(event.coordinate);
                      addMarker(lonLat[0], lonLat[1]);
                    });
              </script> -->
            <!-- </div> -->
        <input type="submit" value="Submit" data-wait="Please wait..." class="submit-button-2 w-button"></form>
      <div class="w-form-done"></div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src="js/script_electrician.js" charset="utf-8" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>
